---
const { title = "Dura ‚Äî The Knowledge Granary" } = Astro.props;
import "../styles/global.css";
import { Search } from "../components";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Dura ‚Äî The Knowledge Granary. Industry-grade research platform for privacy-preserving systems in the baeIoT ecosystem."
    />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>
  </head>
  <body
    class="bg-white text-slate-900 font-medium min-h-screen flex flex-col selection:bg-amber-200 selection:text-amber-900"
  >
    <div
      class="fixed inset-x-0 top-0 h-96 bg-gradient-to-b from-amber-50 to-transparent -z-10 pointer-events-none"
    >
    </div>

    <header
      class="border-b border-slate-100 bg-white/80 backdrop-blur-md sticky top-0 z-50"
    >
      <nav
        class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between"
      >
        <a
          href="/"
          class="text-xl font-bold tracking-tight text-amber-800 flex items-center gap-2"
        >
          <span class="text-2xl">üåæ</span>
          <span>Dura</span>
        </a>
        <div class="flex gap-8 text-sm font-medium items-center">
          <div class="w-48">
            <Search />
          </div>
          <a
            href="/concepts"
            class="text-slate-600 hover:text-amber-600 transition-colors"
            >Learn</a
          >
          <a
            href="/papers"
            class="text-slate-600 hover:text-amber-600 transition-colors"
            >Papers</a
          >
          <a
            href="/projects/edgechain"
            class="text-slate-600 hover:text-amber-600 transition-colors"
            >EdgeChain</a
          >
          <a
            href="/projects/msingi"
            class="text-slate-600 hover:text-amber-600 transition-colors"
            >Msingi</a
          >
          <a
            href="/projects/ndani"
            class="text-slate-600 hover:text-amber-600 transition-colors"
            >Ndani</a
          >
          <a
            href="/updates"
            class="text-slate-600 hover:text-amber-600 transition-colors"
            >Updates</a
          >
        </div>
        <div class="flex items-center gap-4">
          {
            Astro.locals.user ? (
              <div class="flex items-center gap-3">
                <a
                  href="/admin"
                  class="text-sm font-medium text-amber-700 hover:text-amber-900 px-3 py-1 bg-amber-50 rounded-full border border-amber-200 hover:bg-amber-100 transition-colors"
                >
                  üèõÔ∏è Admin
                </a>
                <span class="text-sm font-bold text-amber-800 bg-amber-50 px-3 py-1 rounded-full border border-amber-100">
                  @{Astro.locals.user.username}
                </span>
                <form method="post" action="/api/logout">
                  <button class="text-sm font-medium text-slate-500 hover:text-slate-800 px-2 py-1">
                    Sign out
                  </button>
                </form>
              </div>
            ) : (
              <a
                href="/login"
                class="px-5 py-2 bg-stone-900 text-white rounded-full text-sm font-medium hover:bg-stone-800 transition-colors shadow-sm"
              >
                Sign in
              </a>
            )
          }
        </div>
      </nav>
    </header>

    <main class="flex-1 w-full max-w-7xl mx-auto px-4 py-12">
      <slot />
    </main>

    <footer
      class="border-t border-slate-100 py-12 text-center text-slate-500 text-sm bg-slate-50"
    >
      <p>¬© {new Date().getFullYear()} Dura ‚Äî The Knowledge Granary</p>
      <p class="mt-2 text-xs text-slate-400">
        Part of the <a
          href="https://disruptiveiot.org"
          class="underline hover:text-amber-600">baeIoT ecosystem</a
        >. Research-driven documentation for privacy-preserving systems.
      </p>
    </footer>
  </body>
</html>
